#!/bin/bash

echo "ğŸ”„ Running Kattis scraper before push..."

# Load environment variables
if [ -f .env ]; then
    export $(cat .env | xargs)
fi

# Run the scraper
python3 scraper_playwright.py --username "$KATTIS_USERNAME" --password "$KATTIS_PASSWORD" --solutions-dir solutions --output docs/data.json
# --headed --debug

if [ $? -eq 0 ]; then
    echo "âœ… Scraper completed successfully"
    git add docs/data.json solution_dates.xlsx
else
    echo "âŒ Scraper failed! Push aborted."
    exit 1
fi